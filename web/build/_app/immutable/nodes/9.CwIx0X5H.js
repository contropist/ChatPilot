import{s as Ht,e as n,l as y,c as o,a as v,o as w,w as O,d as u,f as s,i as be,g as l,C as de,p as F,D as Ot,n as rt,x as It,y as At,j as Dt,r as St,t as We,b as Ze,h as nt,E as st,k as Rt,z as Ct,A as Et,B as Vt}from"../chunks/scheduler.DiJq6vPF.js";import{e as Ye}from"../chunks/each.TZzUzPKO.js";import{S as zt,i as qt}from"../chunks/index.BHjMAGPu.js";import{t as at}from"../chunks/Toaster.svelte_svelte_type_style_lang.BHLjDTk_.js";import{g as Tt}from"../chunks/entry.qYnHbvI-.js";import{p as Ft}from"../chunks/stores.BW9SmnG1.js";import{d as Mt}from"../chunks/index.EObCQwOH.js";import{s as Yt}from"../chunks/index.CSs7Pbog.js";import{b as Wt}from"../chunks/index.CZYlxN09.js";import{u as Zt,g as Xt}from"../chunks/index.CKKoqNgn.js";function jt(a,t,e){const r=a.slice();return r[31]=t[e],r[32]=t,r[33]=e,r}function Nt(a,t,e){const r=a.slice();return r[34]=t[e],r[35]=t,r[36]=e,r}function Gt(a){let t,e;return{c(){t=Ct("svg"),e=Ct("path"),this.h()},l(r){t=Et(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var d=v(t);e=Et(d,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(e).forEach(u),d.forEach(u),this.h()},h(){s(e,"fill-rule","evenodd"),s(e,"d","M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z"),s(e,"clip-rule","evenodd"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"viewBox","0 0 24 24"),s(t,"fill","currentColor"),s(t,"class","w-8")},m(r,d){be(r,t,d),l(t,e)},p:rt,d(r){r&&u(t)}}}function Jt(a){let t,e;return{c(){t=n("img"),this.h()},l(r){t=o(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Vt(t.src,e=a[3])||s(t,"src",e),s(t,"alt","modelfile profile"),s(t,"class","rounded-full w-20 h-20 object-cover")},m(r,d){be(r,t,d)},p(r,d){d[0]&8&&!Vt(t.src,e=r[3])&&s(t,"src",e)},d(r){r&&u(t)}}}function Pt(a){let t,e,r,d,k='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',g,b,D;function C(){a[22].call(e,a[35],a[36])}function H(){return a[23](a[36])}return{c(){t=n("div"),e=n("input"),r=y(),d=n("button"),d.innerHTML=k,g=y(),this.h()},l(m){t=o(m,"DIV",{class:!0});var f=v(t);e=o(f,"INPUT",{class:!0,placeholder:!0}),r=w(f),d=o(f,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),O(d)!=="svelte-1tpj1wu"&&(d.innerHTML=k),g=w(f),f.forEach(u),this.h()},h(){s(e,"class","px-3 py-1.5 text-sm w-full bg-transparent outline-none border-r dark:border-gray-600"),s(e,"placeholder","Write a prompt suggestion (e.g. Who are you?)"),s(d,"class","px-2"),s(d,"type","button"),s(t,"class","flex border dark:border-gray-600 rounded-lg")},m(m,f){be(m,t,f),l(t,e),de(e,a[34].content),l(t,r),l(t,d),l(t,g),b||(D=[F(e,"input",C),F(d,"click",H)],b=!0)},p(m,f){a=m,f[0]&1024&&e.value!==a[34].content&&de(e,a[34].content)},d(m){m&&u(t),b=!1,At(D)}}}function Ut(a){let t,e,r,d,k=a[31]+"",g,b,D,C;function H(){a[24].call(e,a[31])}return{c(){t=n("div"),e=n("input"),r=y(),d=n("div"),g=We(k),b=y(),this.h()},l(m){t=o(m,"DIV",{class:!0});var f=v(t);e=o(f,"INPUT",{type:!0}),r=w(f),d=o(f,"DIV",{class:!0});var I=v(d);g=Ze(I,k),I.forEach(u),b=w(f),f.forEach(u),this.h()},h(){s(e,"type","checkbox"),s(d,"class","capitalize"),s(t,"class","flex space-x-2 text-sm")},m(m,f){be(m,t,f),l(t,e),e.checked=a[11][a[31]],l(t,r),l(t,d),l(d,g),l(t,b),D||(C=F(e,"change",H),D=!0)},p(m,f){a=m,f[0]&2048&&(e.checked=a[11][a[31]]),f[0]&2048&&k!==(k=a[31]+"")&&nt(g,k)},d(m){m&&u(t),D=!1,C()}}}function Lt(a){let t,e,r="Pull Progress",d,k,g,b=(a[5]??0)+"",D,C,H,m,f;return{c(){t=n("div"),e=n("div"),e.textContent=r,d=y(),k=n("div"),g=n("div"),D=We(b),C=We("%"),H=y(),m=n("div"),f=We(a[4]),this.h()},l(I){t=o(I,"DIV",{class:!0});var c=v(t);e=o(c,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-13fvdnm"&&(e.textContent=r),d=w(c),k=o(c,"DIV",{class:!0});var N=v(k);g=o(N,"DIV",{class:!0,style:!0});var V=v(g);D=Ze(V,b),C=Ze(V,"%"),V.forEach(u),N.forEach(u),H=w(c),m=o(c,"DIV",{class:!0,style:!0});var x=v(m);f=Ze(x,a[4]),x.forEach(u),c.forEach(u),this.h()},h(){s(e,"class","text-sm font-semibold mb-2"),s(g,"class","dark:bg-gray-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full"),st(g,"width",Math.max(15,a[5]??0)+"%"),s(k,"class","w-full rounded-full dark:bg-gray-800"),s(m,"class","mt-1 text-xs dark:text-gray-500"),st(m,"font-size","0.5rem"),s(t,"class","my-2")},m(I,c){be(I,t,c),l(t,e),l(t,d),l(t,k),l(k,g),l(g,D),l(g,C),l(t,H),l(t,m),l(m,f)},p(I,c){c[0]&32&&b!==(b=(I[5]??0)+"")&&nt(D,b),c[0]&32&&st(g,"width",Math.max(15,I[5]??0)+"%"),c[0]&16&&nt(f,I[4])},d(I){I&&u(t)}}}function Bt(a){let t,e=`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
											transform-origin: center;
											animation: spinner_AtaB 0.75s infinite linear;
										}
										@keyframes spinner_AtaB {
											100% {
												transform: rotate(360deg);
											}
										}
									</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`;return{c(){t=n("div"),t.innerHTML=e,this.h()},l(r){t=o(r,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1gf8wym"&&(t.innerHTML=e),this.h()},h(){s(t,"class","ml-1.5 self-center")},m(r,d){be(r,t,d)},d(r){r&&u(t)}}}function Kt(a){let t,e,r,d,k,g,b="My Modelfiles",D,C,H='<div class="self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg></div> <div class="self-center font-medium text-sm">Back</div>',m,f,I,c,N,V,x,P,ke,Y,K,ee,Te="Name*",Ie,ce,q,De,Q,te,Me="Model Tag Name*",Ce,ue,W,p,T,Z,$="Description*",S,X,_,ae,R,le,je='<div class="self-center text-sm font-semibold">Modelfile</div>',Ee,re,fe,ot="Content*",Xe,Ve,G,Ge,ne,oe,he,it="Prompt suggestions",Je,se,dt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"></path></svg>',Ke,ve,Qe,ie,pe,ct="Categories",$e,ge,et,Ne,ye,z,me,ut="Save & Update",tt,Pe,lt,ft;function ht(i,E){return i[3]?Jt:Gt}let Ue=ht(a),J=Ue(a),we=Ye(a[10]),M=[];for(let i=0;i<we.length;i+=1)M[i]=Pt(Nt(a,we,i));let xe=Ye(Object.keys(a[11])),j=[];for(let i=0;i<xe.length;i+=1)j[i]=Ut(jt(a,xe,i));let U=a[5]!==null&&Lt(a),A=a[0]&&Bt();return{c(){t=n("div"),e=n("div"),r=n("div"),d=n("input"),k=y(),g=n("div"),g.textContent=b,D=y(),C=n("button"),C.innerHTML=H,m=y(),f=n("hr"),I=y(),c=n("form"),N=n("div"),V=n("div"),x=n("button"),J.c(),ke=y(),Y=n("div"),K=n("div"),ee=n("div"),ee.textContent=Te,Ie=y(),ce=n("div"),q=n("input"),De=y(),Q=n("div"),te=n("div"),te.textContent=Me,Ce=y(),ue=n("div"),W=n("input"),p=y(),T=n("div"),Z=n("div"),Z.textContent=$,S=y(),X=n("div"),_=n("input"),ae=y(),R=n("div"),le=n("div"),le.innerHTML=je,Ee=y(),re=n("div"),fe=n("div"),fe.textContent=ot,Xe=y(),Ve=n("div"),G=n("textarea"),Ge=y(),ne=n("div"),oe=n("div"),he=n("div"),he.textContent=it,Je=y(),se=n("button"),se.innerHTML=dt,Ke=y(),ve=n("div");for(let i=0;i<M.length;i+=1)M[i].c();Qe=y(),ie=n("div"),pe=n("div"),pe.textContent=ct,$e=y(),ge=n("div");for(let i=0;i<j.length;i+=1)j[i].c();et=y(),U&&U.c(),Ne=y(),ye=n("div"),z=n("button"),me=n("div"),me.textContent=ut,tt=y(),A&&A.c(),this.h()},l(i){t=o(i,"DIV",{class:!0});var E=v(t);e=o(E,"DIV",{class:!0});var h=v(e);r=o(h,"DIV",{class:!0});var L=v(r);d=o(L,"INPUT",{type:!0,accept:!0}),k=w(L),g=o(L,"DIV",{class:!0,"data-svelte-h":!0}),O(g)!=="svelte-14jlof8"&&(g.textContent=b),D=w(L),C=o(L,"BUTTON",{class:!0,"data-svelte-h":!0}),O(C)!=="svelte-undlmf"&&(C.innerHTML=H),m=w(L),f=o(L,"HR",{class:!0}),I=w(L),c=o(L,"FORM",{class:!0});var B=v(c);N=o(B,"DIV",{class:!0});var vt=v(N);V=o(vt,"DIV",{class:!0});var pt=v(V);x=o(pt,"BUTTON",{class:!0,type:!0});var gt=v(x);J.l(gt),gt.forEach(u),pt.forEach(u),vt.forEach(u),ke=w(B),Y=o(B,"DIV",{class:!0});var Le=v(Y);K=o(Le,"DIV",{class:!0});var Be=v(K);ee=o(Be,"DIV",{class:!0,"data-svelte-h":!0}),O(ee)!=="svelte-7d74a3"&&(ee.textContent=Te),Ie=w(Be),ce=o(Be,"DIV",{});var mt=v(ce);q=o(mt,"INPUT",{class:!0,placeholder:!0}),mt.forEach(u),Be.forEach(u),De=w(Le),Q=o(Le,"DIV",{class:!0});var Ae=v(Q);te=o(Ae,"DIV",{class:!0,"data-svelte-h":!0}),O(te)!=="svelte-adac66"&&(te.textContent=Me),Ce=w(Ae),ue=o(Ae,"DIV",{});var _t=v(ue);W=o(_t,"INPUT",{class:!0,placeholder:!0}),_t.forEach(u),Ae.forEach(u),Le.forEach(u),p=w(B),T=o(B,"DIV",{class:!0});var He=v(T);Z=o(He,"DIV",{class:!0,"data-svelte-h":!0}),O(Z)!=="svelte-17hu182"&&(Z.textContent=$),S=w(He),X=o(He,"DIV",{});var bt=v(X);_=o(bt,"INPUT",{class:!0,placeholder:!0}),bt.forEach(u),He.forEach(u),ae=w(B),R=o(B,"DIV",{class:!0});var Oe=v(R);le=o(Oe,"DIV",{class:!0,"data-svelte-h":!0}),O(le)!=="svelte-oybxeh"&&(le.innerHTML=je),Ee=w(Oe),re=o(Oe,"DIV",{class:!0});var Se=v(re);fe=o(Se,"DIV",{class:!0,"data-svelte-h":!0}),O(fe)!=="svelte-2imxe0"&&(fe.textContent=ot),Xe=w(Se),Ve=o(Se,"DIV",{});var yt=v(Ve);G=o(yt,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),v(G).forEach(u),yt.forEach(u),Se.forEach(u),Oe.forEach(u),Ge=w(B),ne=o(B,"DIV",{class:!0});var Re=v(ne);oe=o(Re,"DIV",{class:!0});var ze=v(oe);he=o(ze,"DIV",{class:!0,"data-svelte-h":!0}),O(he)!=="svelte-cktctz"&&(he.textContent=it),Je=w(ze),se=o(ze,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),O(se)!=="svelte-5pubto"&&(se.innerHTML=dt),ze.forEach(u),Ke=w(Re),ve=o(Re,"DIV",{class:!0});var wt=v(ve);for(let _e=0;_e<M.length;_e+=1)M[_e].l(wt);wt.forEach(u),Re.forEach(u),Qe=w(B),ie=o(B,"DIV",{class:!0});var qe=v(ie);pe=o(qe,"DIV",{class:!0,"data-svelte-h":!0}),O(pe)!=="svelte-1w33zjy"&&(pe.textContent=ct),$e=w(qe),ge=o(qe,"DIV",{class:!0});var xt=v(ge);for(let _e=0;_e<j.length;_e+=1)j[_e].l(xt);xt.forEach(u),qe.forEach(u),et=w(B),U&&U.l(B),Ne=w(B),ye=o(B,"DIV",{class:!0});var kt=v(ye);z=o(kt,"BUTTON",{class:!0,type:!0});var Fe=v(z);me=o(Fe,"DIV",{class:!0,"data-svelte-h":!0}),O(me)!=="svelte-5s0nx6"&&(me.textContent=ut),tt=w(Fe),A&&A.l(Fe),Fe.forEach(u),kt.forEach(u),B.forEach(u),L.forEach(u),h.forEach(u),E.forEach(u),this.h()},h(){s(d,"type","file"),d.hidden=!0,s(d,"accept","image/*"),s(g,"class","text-2xl font-semibold mb-6"),s(C,"class","flex space-x-1"),s(f,"class","my-3 dark:border-gray-700"),s(x,"class",P=(a[3]?"":"p-6")+" rounded-full dark:bg-gray-700 border border-dashed border-gray-200"),s(x,"type","button"),s(V,"class","self-center"),s(N,"class","flex justify-center my-4"),s(ee,"class","text-sm font-semibold mb-2"),s(q,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),s(q,"placeholder","Name your modelfile"),q.required=!0,s(K,"class","flex-1"),s(te,"class","text-sm font-semibold mb-2"),s(W,"class","px-3 py-1.5 text-sm w-full bg-transparent disabled:text-gray-500 border dark:border-gray-600 outline-none rounded-lg"),s(W,"placeholder","Add a model tag name"),W.value=a[7],W.disabled=!0,W.required=!0,s(Q,"class","flex-1"),s(Y,"class","my-2 flex space-x-2"),s(Z,"class","text-sm font-semibold mb-2"),s(_,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),s(_,"placeholder","Add a short description about what this modelfile does"),_.required=!0,s(T,"class","my-2"),s(le,"class","flex w-full justify-between"),s(fe,"class","text-xs font-semibold mb-2"),s(G,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),s(G,"placeholder",`FROM llama2
PARAMETER temperature 1
SYSTEM """
You are Mario from Super Mario Bros, acting as an assistant.
"""`),s(G,"rows","6"),G.required=!0,s(re,"class","mt-2"),s(R,"class","my-2"),s(he,"class","self-center text-sm font-semibold"),s(se,"class","p-1 px-3 text-xs flex rounded transition"),s(se,"type","button"),s(oe,"class","flex w-full justify-between mb-2"),s(ve,"class","flex flex-col space-y-1"),s(ne,"class","my-2"),s(pe,"class","text-sm font-semibold mb-2"),s(ge,"class","grid grid-cols-4"),s(ie,"class","my-2"),s(me,"class","self-center font-medium"),s(z,"class",Pe="text-sm px-3 py-2 transition rounded-xl "+(a[0]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-800")+" flex"),s(z,"type","submit"),z.disabled=a[0],s(ye,"class","my-2 flex justify-end"),s(c,"class","flex flex-col"),s(r,"class","max-w-2xl mx-auto w-full px-3 md:px-0 my-10"),s(e,"class","flex flex-col justify-between w-full overflow-y-auto"),s(t,"class","min-h-screen max-h-[100dvh] w-full flex justify-center dark:text-white")},m(i,E){be(i,t,E),l(t,e),l(e,r),l(r,d),a[13](d),l(r,k),l(r,g),l(r,D),l(r,C),l(r,m),l(r,f),l(r,I),l(r,c),l(c,N),l(N,V),l(V,x),J.m(x,null),l(c,ke),l(c,Y),l(Y,K),l(K,ee),l(K,Ie),l(K,ce),l(ce,q),de(q,a[6]),l(Y,De),l(Y,Q),l(Q,te),l(Q,Ce),l(Q,ue),l(ue,W),l(c,p),l(c,T),l(T,Z),l(T,S),l(T,X),l(X,_),de(_,a[8]),l(c,ae),l(c,R),l(R,le),l(R,Ee),l(R,re),l(re,fe),l(re,Xe),l(re,Ve),l(Ve,G),de(G,a[9]),l(c,Ge),l(c,ne),l(ne,oe),l(oe,he),l(oe,Je),l(oe,se),l(ne,Ke),l(ne,ve);for(let h=0;h<M.length;h+=1)M[h]&&M[h].m(ve,null);l(c,Qe),l(c,ie),l(ie,pe),l(ie,$e),l(ie,ge);for(let h=0;h<j.length;h+=1)j[h]&&j[h].m(ge,null);l(c,et),U&&U.m(c,null),l(c,Ne),l(c,ye),l(ye,z),l(z,me),l(z,tt),A&&A.m(z,null),lt||(ft=[F(d,"change",a[14]),F(d,"change",a[15]),F(C,"click",a[16]),F(x,"click",a[17]),F(q,"input",a[18]),F(_,"input",a[19]),F(G,"input",a[20]),F(se,"click",a[21]),F(c,"submit",Ot(a[25]))],lt=!0)},p(i,E){if(Ue===(Ue=ht(i))&&J?J.p(i,E):(J.d(1),J=Ue(i),J&&(J.c(),J.m(x,null))),E[0]&8&&P!==(P=(i[3]?"":"p-6")+" rounded-full dark:bg-gray-700 border border-dashed border-gray-200")&&s(x,"class",P),E[0]&64&&q.value!==i[6]&&de(q,i[6]),E[0]&128&&W.value!==i[7]&&(W.value=i[7]),E[0]&256&&_.value!==i[8]&&de(_,i[8]),E[0]&512&&de(G,i[9]),E[0]&1024){we=Ye(i[10]);let h;for(h=0;h<we.length;h+=1){const L=Nt(i,we,h);M[h]?M[h].p(L,E):(M[h]=Pt(L),M[h].c(),M[h].m(ve,null))}for(;h<M.length;h+=1)M[h].d(1);M.length=we.length}if(E[0]&2048){xe=Ye(Object.keys(i[11]));let h;for(h=0;h<xe.length;h+=1){const L=jt(i,xe,h);j[h]?j[h].p(L,E):(j[h]=Ut(L),j[h].c(),j[h].m(ge,null))}for(;h<j.length;h+=1)j[h].d(1);j.length=xe.length}i[5]!==null?U?U.p(i,E):(U=Lt(i),U.c(),U.m(c,Ne)):U&&(U.d(1),U=null),i[0]?A||(A=Bt(),A.c(),A.m(z,null)):A&&(A.d(1),A=null),E[0]&1&&Pe!==(Pe="text-sm px-3 py-2 transition rounded-xl "+(i[0]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-800")+" flex")&&s(z,"class",Pe),E[0]&1&&(z.disabled=i[0])},i:rt,o:rt,d(i){i&&u(t),a[13](null),J.d(),It(M,i),It(j,i),U&&U.d(),A&&A.d(),lt=!1,At(ft)}}}function Qt(a,t,e){let r,d;Dt(a,Mt,p=>e(28,r=p)),Dt(a,Ft,p=>e(29,d=p));let k=!1,g,b,D=null,C="",H=null,m=!1,f=null,I="",c="",N="",V="",x=[{content:""}],P={character:!1,assistant:!1,writing:!1,productivity:!1,programming:!1,"data analysis":!1,lifestyle:!1,education:!1,business:!1};St(()=>{if(e(7,c=d.url.searchParams.get("tag")),c){f=r.filter(p=>p.tagName===c)[0],console.log(f),e(3,D=f.imageUrl),e(6,I=f.title),e(8,N=f.desc),e(9,V=f.content),e(10,x=f.suggestionPrompts.length!=0?f.suggestionPrompts:[{content:""}]);for(const p of f.categories)e(11,P[p.toLowerCase()]=!0,P)}else Tt("/modelfiles")});const ke=async p=>{await Zt(localStorage.token,p.tagName,p),await Mt.set(await Xt(localStorage.token))},Y=async()=>{if(e(0,k=!0),Object.keys(P).filter(p=>P[p]).length==0&&at.error("Uh-oh! It looks like you missed selecting a category. Please choose one to complete your modelfile."),I!==""&&N!==""&&V!==""&&Object.keys(P).filter(p=>P[p]).length>0){const p=await Wt(localStorage.token,c,V);if(p){const T=p.body.pipeThrough(new TextDecoderStream).pipeThrough(Yt(`
`)).getReader();for(;;){const{value:Z,done:$}=await T.read();if($)break;try{let S=Z.split(`
`);for(const X of S)if(X!==""){console.log(X);let _=JSON.parse(X);if(_.error)throw _.error;if(_.detail)throw _.detail;_.status&&(!_.digest&&!_.status.includes("writing")&&!_.status.includes("sha256")?(at.success(_.status),_.status==="success"&&(m=!0)):_.digest&&(e(4,C=_.digest),_.completed?e(5,H=Math.round(_.completed/_.total*1e3)/10):e(5,H=100)))}}catch(S){console.log(S),at.error(S)}}}m&&(await ke({tagName:c,imageUrl:D,title:I,desc:N,content:V,suggestionPrompts:x.filter(T=>T.content!==""),categories:Object.keys(P).filter(T=>P[T])}),await Tt("/modelfiles"))}e(0,k=!1),m=!1};function K(p){Rt[p?"unshift":"push"](()=>{g=p,e(1,g)})}function ee(){b=this.files,e(2,b)}const Te=()=>{let p=new FileReader;p.onload=T=>{let Z=`${T.target.result}`;const $=new Image;$.src=Z,$.onload=function(){const S=document.createElement("canvas"),X=S.getContext("2d"),_=$.width/$.height;let ae,R;_>1?(ae=100*_,R=100):(ae=100,R=100/_),S.width=100,S.height=100;const le=(100-ae)/2,je=(100-R)/2;X.drawImage($,le,je,ae,R);const Ee=S.toDataURL("image/jpeg");e(3,D=Ee),e(2,b=null)}},b&&b.length>0&&["image/gif","image/jpeg","image/png"].includes(b[0].type)?p.readAsDataURL(b[0]):(console.log(`Unsupported File Type '${b[0].type}'.`),e(2,b=null))},Ie=()=>{history.back()},ce=()=>{g.click()};function q(){I=this.value,e(6,I)}function De(){N=this.value,e(8,N)}function Q(){V=this.value,e(9,V)}const te=()=>{(x.length===0||x.at(-1).content!=="")&&e(10,x=[...x,{content:""}])};function Me(p,T){p[T].content=this.value,e(10,x)}const Ce=p=>{x.splice(p,1),e(10,x)};function ue(p){P[p]=this.checked,e(11,P)}return[k,g,b,D,C,H,I,c,N,V,x,P,Y,K,ee,Te,Ie,ce,q,De,Q,te,Me,Ce,ue,()=>{Y()}]}class dl extends zt{constructor(t){super(),qt(this,t,Qt,Kt,Ht,{},null,[-1,-1])}}export{dl as component};
